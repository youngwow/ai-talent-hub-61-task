# ai-talent-hub-61-task

### **Отчет об анализе мошеннических транзакций и выработке гипотез**

Целью данного анализа было изучение набора данных о финансовых транзакциях для выявления ключевых закономерностей мошенничества и формулирования гипотез, которые помогут организации снизить финансовые потери и улучшить систему безопасности.

#### **1. Как решалась задача: Подход и этапы**

Анализ был построен по принципу "от общего к частному" и состоял из нескольких ключевых этапов:

1.  **Предварительное исследование данных (EDA - Exploratory Data Analysis):** На первом этапе я загрузил и изучил структуру данных. Это позволило убедиться в качестве данных и понять, какие признаки являются наиболее перспективными для анализа.

2.  **Агрегированный анализ мошенничества:** Я начал с самых общих вопросов: "Где и как часто происходит мошенничество?". Путем группировки данных по `country` и `is_fraud` было выявлено, что Россия занимает лидирующие позиции по объему мошеннических операций. Это наблюдение стало ключевым и определило дальнейший фокус исследования.

3.  **Глубокий анализ по ключевому сегменту (Россия):** Сосредоточившись на транзакциях из России, я проанализировал средний чек (`amount`) в разрезе категорий вендоров (`vendor_category`) для легитимных и мошеннических операций. Результатом стал предоставленный вами график, который наглядно показал аномально высокий средний чек у мошенников в категориях **Travel** ($2066) и **Retail** ($1196) по сравнению с легитимными транзакциями. Это стало первым важным инсайтом.
  <img width="1189" height="790" alt="Unknown-5" src="https://github.com/user-attachments/assets/7288bdf9-0b57-46eb-b40c-45a5611bc5f2" />

4.  **Анализ временных паттернов:** Далее я исследовал поле `timestamp`. Извлекая час дня и день недели, я построил распределение всех и мошеннических транзакций по времени. Это позволило обнаружить второй ключевой паттерн: **всплеск мошеннической активности в ночные часы (с 1:00 до 5:00)**, когда легитимная активность пользователей, как правило, снижена.
<img width="1790" height="590" alt="Unknown-6" src="https://github.com/user-attachments/assets/ce234e2f-ed6e-45b6-9e1f-31383382fee5" />
<img width="1151" height="626" alt="Unknown-7" src="https://github.com/user-attachments/assets/0b8b6fe4-1f6c-40fc-8c98-be2df2189246" />


5.  **Сегментация клиентов и выявление "рискованной" группы:** Я предположил, что не все клиенты одинаково подвержены риску. Чтобы проверить это, я решил выделить группу "подозрительных" клиентов. В качестве метрики был выбран показатель `last_hour_activity.unique_merchants`, так как частая смена продавцов за короткий промежуток времени может указывать на "тестирование" украденной карты. Я рассчитал медианное значение этого показателя для каждого клиента и выделил тех, кто попал в топ-5% (превысил 95-й квантиль). Таким образом была сформирована группа из **229 высокорискованных клиентов**.

7.  **Финальный сфокусированный анализ:** Объединив все предыдущие находки, я отфильтровал данные по самому узкому и рискованному сегменту:
    * Транзакции **229 "подозрительных" клиентов**.
    * Страна: **Россия**.
    * Категории: **Travel** и **Retail**.
    * Сумма выше средней для мошенничества (> $875).

    Для этого сегмента была построена тепловая карта, показывающая уровень мошенничества (долю фрода) в зависимости от дня недели и часа.
    <img width="1151" height="626" alt="Unknown-8" src="https://github.com/user-attachments/assets/5344a68b-3ff4-4ad8-856b-aa904e717dc4" />
    <img width="1307" height="703" alt="Unknown-9" src="https://github.com/user-attachments/assets/b665bb55-81b7-4549-8c49-06a99983898b" />
    Существует очевидный и стабильный паттерн: период с 00:00 до 05:00 утра является зоной экстремально высокого риска практически каждый день. Уровень мошенничества в эти часы почти никогда не опускается ниже 80% и часто превышает 90%.
    Выявлены пиковые точки:
    - Четверг, 2:00: Уровень мошенничества достигает 99.48%
    - Вторник, 2:00: 97.01%
    - Воскресенье, 2:00: 96.96%
    - Понедельник, 2:00: 96.55%
    
    В дневные часы, примерно с 09:00 до 18:00, уровень мошенничества значительно снижается, опускаясь до 30-50%. Это время, когда активны легитимные пользователи, и мошеннические транзакции "растворяются" в общем потоке.

    Мошенническая активность в ночные часы в субботу и воскресенье так же высока, как и в будни. 

#### **2. Инструменты**

* **Язык программирования:** Python.
* **Библиотеки для работы с данными:**
    * **Pandas:** для загрузки, обработки и агрегации данных.
    * **NumPy:** для численных вычислений.
* **Библиотеки для визуализации:**
    * **Matplotlib** и **Seaborn:** для построения графиков (барчарты, распределения, тепловые карты).
* **Среда разработки:** Google Colab, как интерактивная среда для пошагового анализа и быстрой визуализации результатов.

#### **3. Как принимались решения**

* **Решение сфокусироваться на России** было принято на основе данных, показавших ее как регион с наибольшим риском. Это позволило не "распыляться", а найти конкретные, действенные инсайты.
* **Решение анализировать средний чек** было продиктовано желанием понять экономический ущерб и найти признаки, которые сильно отличают мошенников. Аномальное расхождение среднего чека — это сигнал для любой антифрод-системы.
* **Решение сегментировать клиентов** по поведенческому признаку (`unique_merchants`) было принято для того, чтобы перейти от общих правил к персонализированному подходу. Вместо того чтобы ужесточать правила для всех, мы можем применять их только к малой группе с высоким риском, не ухудшая пользовательский опыт для большинства.
* **Решение создать финальную тепловую карту** было логичным завершением анализа, которое позволило превратить разрозненные инсайты в единую, легко интерпретируемую картину и определить точные "окна" максимального риска.

---

### **Гипотезы для извлечения ценности из данных**

На основе проведенного анализа можно сформулировать следующие гипотезы.

#### **Продуктовые гипотезы**

1.  **Гипотеза о "Ночном рисковом профиле":**
    * **Утверждение:** Транзакции, совершаемые в России с 1:00 до 4:00 ночи в категориях "Travel" и "Retail" на сумму свыше $875, имеют чрезвычайно высокую вероятность быть мошенническими.
    * **Предлагаемое решение:** Внедрить динамическое правило в антифрод-систему: для таких транзакций автоматически требовать дополнительное подтверждение (например, SMS-код, звонок от службы безопасности). Для риска > 95%: Полная блокировка транзакции с последующим звонком клиенту для верификации.
    * **Ожидаемая ценность:** Резкое снижение потерь от наиболее крупного и очевидного сегмента мошенничества с минимальным влиянием на легитимных пользователей, так как их активность в это время низка.

2.  **Гипотеза о "Скомпрометированных вендорах":**
    * **Утверждение:** Мошенники целенаправленно используют определенных вендоров в категориях "Travel" и "Retail" в России для вывода крупных сумм. Высокий средний чек может указывать либо на скомпрометированных продавцов, либо на продавцов с низким уровнем защиты.
    * **Предлагаемое решение:** Провести дополнительный анализ и составить список вендоров, через которые проходит большинство мошеннических операций из выявленного сегмента. Для транзакций у этих вендоров можно временно понизить лимиты или ввести премодерацию.
    * **Ожидаемая ценность:** Блокировка основного канала для отмывания денег и снижение привлекательности платформы для мошенников.

#### **Технические гипотезы**

1.  **Гипотеза об эффективности специализированных признаков (Feature Engineering):**
    * **Утверждение:** Признаки, описывающие поведение клиента в коротком временном окне (как `last_hour_activity`), а также комбинация времени суток и категории трат, являются значительно более сильными предикторами для ML-модели, чем статичные данные.
    * **Предлагаемое решение:** Обогатить датасет для обучения модели новыми признаками:
        * `is_night_transaction` (бинарный флаг для транзакций с 1 до 4 ночи).
        * `avg_amount_per_category` (средний чек клиента в данной категории за всю историю).
        * `amount_deviation` (отклонение текущей транзакции от среднего чека клиента).
    * **Ожидаемая ценность:** Повышение точности (precision) и полноты (recall) ML-модели обнаружения мошенничества.
